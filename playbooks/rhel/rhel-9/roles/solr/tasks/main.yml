- name: Create Solr user
  include_role:
    name: solr
    tasks_from: solr_user.yml

#TODO: Install Solr < 5.
- name: Install Solr version less than 5
  include_tasks: solr_install_pre5.yml
  when: "solr_version.split('.')[0] < '5'"

# Install Solr 5+.
- name: Install Solr version 5 or greater
  include_tasks: solr_install.yml
  when: "solr_version.split('.')[0] >= '5'"

- name: Setup Solr service
  include_role:
    name: solr
    tasks_from: solr_service.yml

- name: Setup Solr config
  include_role:
    name: solr
    tasks_from: solr_config.yml

- name: Setup CKAN config for Solr
  include_role:
    name: solr
    tasks_from: solr_config_ckan.yml

- name: Setup spatial config for Solr
  include_role:
    name: solr
    tasks_from: solr_config_spatial.yml
